<!DOCTYPE html>
<html lang="en">
  <head>
    <title>ğŸ“° NewsWave</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #f8f9fa, #e3f2fd);
        color: #212529;
        padding: 30px;
        transition: background 0.3s, color 0.3s;
      }

      .brand {
        font-size: 3rem;
        font-weight: 800;
        color: #007bff;
      }

      .dropdown,
      .btn-mode {
        margin: 1rem 0;
      }

      .news-card {
        border: none;
        border-radius: 1rem;
        background: #ffffff;
        color: #212529;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s ease;
      }

      .news-card:hover {
        transform: scale(1.02);
      }

      .news-img {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-radius: 1rem 1rem 0 0;
      }

      .dark-mode {
        background: #121212;
        color: #f1f1f1;
      }

      .dark-mode .news-card {
        background: #1e1e1e;
        color: #f1f1f1;
      }

      .dark-mode a {
        color: #90caf9;
      }

      .dark-mode .brand {
        color: #90caf9;
      }

      .share-btns {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-top: 0.75rem;
      }

      .share-btns form {
        display: inline;
      }

      .share-btns button,
      .share-btns span {
        flex-grow: 1;
        flex-basis: calc(33% - 10px);
        text-align: center;
        font-size: 0.85rem;
      }

      .card-title a {
        text-decoration: none;
        color: inherit;
      }
    </style>
  </head>

  <body>
    {% load social_share %}
    <div class="container text-center">
      <div class="brand">ğŸŒŠ NewsWave</div>
      <p class="lead">Fresh news creating views.</p>

      <div class="dropdown d-inline-block">
        <button
          class="btn btn-outline-primary dropdown-toggle"
          type="button"
          data-bs-toggle="dropdown"
        >
          Load Category
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="{% url 'scrape' name='latest' %}">ğŸ”¥ Latest</a></li>
          <li><a class="dropdown-item" href="{% url 'scrape' name='entertainment' %}">ğŸ¬ Entertainment</a></li>
          <li><a class="dropdown-item" href="{% url 'scrape' name='sports' %}">ğŸ† Sports</a></li>
          <li><a class="dropdown-item" href="{% url 'scrape' name='politics' %}">ğŸ›ï¸ Politics</a></li>
          {% comment %} <li><a class="dropdown-item" href="{% url 'scrape' name='opinion' %}">ğŸ§  Opinion</a></li>
          <li><a class="dropdown-item" href="{% url 'scrape' name='breaking-news' %}">ğŸš¨ Breaking</a></li> {% endcomment %}
        </ul>
      </div>

      <button class="btn btn-dark btn-mode" onclick="toggleDark()">ğŸŒ— Dark Mode</button>

      <div class="row justify-content-center mt-4">
        {% for object in object_list %}
        <div class="col-md-6 col-lg-4 mb-4">
          <div class="card news-card">
            {% if object.image %}
            <img src="{{ object.image }}" alt="News image" class="news-img" />
            {% endif %}
            <div class="card-body">
              <h5 class="card-title">
                <a href="{{ object.url }}" target="_blank">{{ object.title|truncatechars:60 }}</a>
              </h5>
              <div class="share-btns">
                <button
                  class="btn btn-outline-secondary btn-sm"
                  onclick="copyToClipboard('{{ object.url }}')"
                >ğŸ“‹ Copy</button>

                <button
                  class="btn btn-outline-danger btn-sm"
                  onclick="report('{{ object.url }}')"
                >ğŸš© Report</button>

                <span>{% post_to_facebook object_or_url "ğŸ“˜ Facebook" %}</span>
                <span>{% post_to_whatsapp object_or_url "ğŸŸ¢ WhatsApp" %}</span>
                <span>{% post_to_telegram "ğŸ—ï¸ News: " object_or_url "Telegram" %}</span>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>

    <!-- Scripts -->
    <script>
      function toggleDark() {
        document.body.classList.toggle("dark-mode");
      }

      function copyToClipboard(text) {
        navigator.clipboard.writeText(text).then(() => {
          alert("ğŸ”— Copied: " + text);
        });
      }

      function report(url) {
        alert("ğŸš¨ Reported this story: " + url);
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  </body>
</html>
